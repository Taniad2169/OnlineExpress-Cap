<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Express Capital Associates</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2c7744 0%, #1e5631 100%);
            color: white;
            text-align: center;
            padding: 25px 30px;
            position: relative;
        }
        
        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #f8c630 0%, #f39c12 100%);
        }
        
        h1 {
            font-size: 36px;
            margin-bottom: 5px;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 18px;
            opacity: 0.9;
            margin-top: 0;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #2c7744;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            color: #2c7744;
            font-size: 22px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px dashed #ccc;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            margin-right: 10px;
            background: #2c7744;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .page-indicator {
            display: inline-block;
            background: #2c7744;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            flex: 1 1 calc(50% - 20px);
            min-width: 300px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }
        
        input, select {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #ced4da;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #2c7744;
            box-shadow: 0 0 0 4px rgba(44, 119, 68, 0.2);
        }
        
        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }
        
        .radio-group label {
            font-weight: normal;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .radio-group input {
            width: auto;
            margin-right: 8px;
        }
        
        .checkbox-group {
            margin-top: 10px;
        }
        
        .checkbox-group label {
            font-weight: normal;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .checkbox-group input {
            width: auto;
            margin-right: 8px;
        }
        
        .document-uploads {
            margin-top: 20px;
        }
        
        .document-row {
            display: flex;
            align-items: center;
            padding: 14px 16px;
            background: white;
            border-radius: 8px;
            margin-bottom: 12px;
            border: 1px solid #dee2e6;
            transition: transform 0.2s;
        }
        
        .document-row:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .document-row label {
            flex: 1;
            margin-bottom: 0;
            font-weight: normal;
        }
        
        .document-row input {
            flex: 0 0 200px;
        }
        
        .disclosure {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .signature-container {
            margin: 25px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            text-align: center;
        }
        
        .signature-pad {
            border: 2px dashed #ced4da;
            height: 150px;
            margin: 15px 0;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-style: italic;
            border-radius: 8px;
            cursor: not-allowed;
        }
        
        .signature-pad.active {
            cursor: crosshair;
            background: #fff;
            border-color: #2c7744;
        }
        
        .buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 16px 35px;
            background: #2c7744;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        button:hover {
            background: #225e36;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .btn-print {
            background: #6c757d;
        }
        
        .btn-print:hover {
            background: #5a6268;
        }
        
        .btn-pdf {
            background: #17a2b8;
        }
        
        .btn-pdf:hover {
            background: #138496;
        }
        
        .required::after {
            content: " *";
            color: #dc3545;
        }
        
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }
        
        .progress-step {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            position: relative;
            z-index: 2;
        }
        
        .progress-step.active {
            background: #2c7744;
            color: white;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: #e9ecef;
            transform: translateY(-50%);
            z-index: 1;
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .modal h2 {
            color: #dc3545;
            margin-bottom: 15px;
        }
        
        .modal p {
            margin-bottom: 20px;
            font-size: 16px;
        }
        
        .modal button {
            margin: 0 auto;
        }
        
        /* Signature Pad Instructions */
        .signature-instructions {
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
            color: #6c757d;
        }
        
        .signature-instructions.error {
            color: #dc3545;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .form-group {
                flex: 1 1 100%;
            }
            
            .document-row {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .document-row input {
                flex: 1;
                width: 100%;
                margin-top: 10px;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
            
            h1 {
                font-size: 28px;
            }
            
            .subtitle {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Express Capital Associates</h1>
            <p class="subtitle">Business Funding Application</p>
        </header>
        
        <div class="content">
            <div class="progress-bar">
                <div class="progress-step active">1</div>
                <div class="progress-step">2</div>
                <div class="progress-step">3</div>
                <div class="progress-step">4</div>
                <div class="progress-step">5</div>
            </div>
            
            <form id="applicationForm">
                <!-- Page 1: Business Information -->
                <div class="section">
                    <span class="page-indicator">Page 1: Business Information</span>
                    <h2 class="section-title"><i class="fas fa-building"></i> Business Information</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="legalName" class="required">Legal Corporate Name</label>
                            <input type="text" id="legalName" name="legalName" required>
                        </div>
                        <div class="form-group">
                            <label for="dba">DBA (Doing Business As)</label>
                            <input type="text" id="dba" name="dba">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="address" class="required">Physical Address</label>
                            <input type="text" id="address" name="address" required>
                        </div>
                        <div class="form-group">
                            <label for="telephone" class="required">Telephone Number</label>
                            <input type="tel" id="telephone" name="telephone" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="city" class="required">City</label>
                            <input type="text" id="city" name="city" required>
                        </div>
                        <div class="form-group">
                            <label for="state" class="required">State</label>
                            <input type="text" id="state" name="state" required>
                        </div>
                        <div class="form-group">
                            <label for="zip" class="required">Zip Code</label>
                            <input type="text" id="zip" name="zip" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="taxId" class="required">Federal Tax ID</label>
                            <input type="text" id="taxId" name="taxId" required>
                        </div>
                        <div class="form-group">
                            <label for="startDate" class="required">Date Business Started</label>
                            <input type="date" id="startDate" name="startDate" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="website">Website</label>
                            <input type="url" id="website" name="website">
                        </div>
                        <div class="form-group">
                            <label for="email" class="required">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="required">Type of Entity</label>
                            <div class="radio-group">
                                <label><input type="radio" name="entityType" value="corporation" required> Corporation</label>
                                <label><input type="radio" name="entityType" value="llc"> LLC</label>
                                <label><input type="radio" name="entityType" value="partnership"> Partnership</label>
                                <label><input type="radio" name="entityType" value="soleProprietor"> Sole Proprietor</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="industry" class="required">Industry Type</label>
                            <select id="industry" name="industry" required>
                                <option value="">Select a business type</option>
                                <option value="retail">Retail</option>
                                <option value="restaurant">Restaurant</option>
                                <option value="construction">Construction</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="hospitality">Hospitality / Lodging</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="income" class="required">Monthly Gross Income (Avg.)</label>
                            <input type="text" id="income" name="income" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fundingAmount" class="required">Funding Amount Request</label>
                            <input type="text" id="fundingAmount" name="fundingAmount" required>
                        </div>
                        <div class="form-group">
                            <label for="fundingReason" class="required">Primary reason for seeking funding</label>
                            <select id="fundingReason" name="fundingReason" required>
                                <option value="">Select a reason</option>
                                <option value="workingCapital">Working Capital</option>
                                <option value="equipment">Equipment Purchase</option>
                                <option value="expansion">Business Expansion</option>
                                <option value="inventory">Inventory Purchase</option>
                                <option value="bridge">Bridge Financing</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Page 2: Merchant/Owner Information -->
                <div class="section">
                    <span class="page-indicator">Page 2: Merchant/Owner Information</span>
                    <h2 class="section-title"><i class="fas fa-user-tie"></i> Merchant/Owner Information</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ownerName" class="required">Corporate Officer/Owner Name</label>
                            <input type="text" id="ownerName" name="ownerName" required>
                        </div>
                        <div class="form-group">
                            <label for="ownerTitle" class="required">Title</label>
                            <input type="text" id="ownerTitle" name="ownerTitle" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ownership" class="required">Ownership Percentage</label>
                            <input type="text" id="ownership" name="ownership" required>
                        </div>
                        <div class="form-group">
                            <label for="ownerAddress" class="required">Home Address</label>
                            <input type="text" id="ownerAddress" name="ownerAddress" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ownerCity" class="required">City</label>
                            <input type="text" id="ownerCity" name="ownerCity" required>
                        </div>
                        <div class="form-group">
                            <label for="ownerState" class="required">State</label>
                            <input type="text" id="ownerState" name="ownerState" required>
                        </div>
                        <div class="form-group">
                            <label for="ownerZip" class="required">Zip Code</label>
                            <input type="text" id="ownerZip" name="ownerZip" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ssn" class="required">Social Security Number (SSN)</label>
                            <input type="text" id="ssn" name="ssn" required>
                        </div>
                        <div class="form-group">
                            <label for="dob" class="required">Date of Birth</label>
                            <input type="date" id="dob" name="dob" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fico" class="required">FICO Score</label>
                            <select id="fico" name="fico" required>
                                <option value="">Select your score</option>
                                <option value="800+">800+</option>
                                <option value="750-799">750-799</option>
                                <option value="700-749">700-749</option>
                                <option value="650-699">650-699</option>
                                <option value="600-649">600-649</option>
                                <option value="550-599">550-599</option>
                                <option value="500-549">500-549</option>
                                <option value="<500">&lt;500</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="cell" class="required">Cell Number</label>
                            <input type="tel" id="cell" name="cell" required>
                        </div>
                    </div>
                </div>
                
                <!-- Page 3: Partner Information -->
                <div class="section">
                    <span class="page-indicator">Page 3: Partner Information</span>
                    <h2 class="section-title"><i class="fas fa-handshake"></i> Partner Information</h2>
                    <p>Please provide information for all owners with 20% or more ownership.</p>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="partnerName">Partner Name</label>
                            <input type="text" id="partnerName" name="partnerName">
                        </div>
                        <div class="form-group">
                            <label for="partnerTitle">Title</label>
                            <input type="text" id="partnerTitle" name="partnerTitle">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="partnerOwnership">Ownership Percentage</label>
                            <input type="text" id="partnerOwnership" name="partnerOwnership">
                        </div>
                        <div class="form-group">
                            <label for="partnerAddress">Home Address</label>
                            <input type="text" id="partnerAddress" name="partnerAddress">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="partnerCity">City</label>
                            <input type="text" id="partnerCity" name="partnerCity">
                        </div>
                        <div class="form-group">
                            <label for="partnerState">State</label>
                            <input type="text" id="partnerState" name="partnerState">
                        </div>
                        <div class="form-group">
                            <label for="partnerZip">Zip Code</label>
                            <input type="text" id="partnerZip" name="partnerZip">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="partnerSsn">Social Security Number (SSN)</label>
                            <input type="text" id="partnerSsn" name="partnerSsn">
                        </div>
                        <div class="form-group">
                            <label for="partnerDob">Date of Birth</label>
                            <input type="date" id="partnerDob" name="partnerDob">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="partnerFico">FICO Score</label>
                            <select id="partnerFico" name="partnerFico">
                                <option value="">Select score</option>
                                <option value="800+">800+</option>
                                <option value="750-799">750-799</option>
                                <option value="700-749">700-749</option>
                                <option value="650-699">650-699</option>
                                <option value="600-649">600-649</option>
                                <option value="550-599">550-599</option>
                                <option value="500-549">500-549</option>
                                <option value="<500">&lt;500</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="partnerCell">Cell Number</label>
                            <input type="tel" id="partnerCell" name="partnerCell">
                        </div>
                    </div>
                </div>
                
                <!-- Page 4: Additional Documents -->
                <div class="section">
                    <span class="page-indicator">Page 4: Additional Documents</span>
                    <h2 class="section-title"><i class="fas fa-file-alt"></i> Additional Documents Required</h2>
                    
                    <div class="document-uploads">
                        <div class="document-row">
                            <label><input type="checkbox" required> Copy of driver's license</label>
                            <input type="file">
                        </div>
                        <div class="document-row">
                            <label><input type="checkbox" required> 4 recent months of business bank statements</label>
                            <input type="file" multiple>
                        </div>
                        <div class="document-row">
                            <label><input type="checkbox" required> Copy of a voided check</label>
                            <input type="file">
                        </div>
                        <div class="document-row">
                            <label><input type="checkbox"> Miscellaneous documents</label>
                            <input type="file" multiple>
                        </div>
                    </div>
                    
                    <p style="margin-top: 20px; text-align: center; font-style: italic;">
                        Email your documents to: <strong>franz@expresscapitalassociate.com</strong>
                    </p>
                </div>
                
                <!-- Page 5: Signature and Disclosure -->
                <div class="section">
                    <span class="page-indicator">Page 5: Signature and Disclosure</span>
                    <h2 class="section-title"><i class="fas fa-signature"></i> Express Capital Associates Disclosure Form</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fullName" class="required">Full Name</label>
                            <input type="text" id="fullName" name="fullName" required>
                        </div>
                        <div class="form-group">
                            <label for="businessName" class="required">Business Name</label>
                            <input type="text" id="businessName" name="businessName" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone" class="required">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                    </div>
                    
                    <div class="disclosure">
                        <h3>Disclosure / Terms & Conditions</h3>
                        <p>By signing above, each of the above listed business and business owner/officer (individually and collectively, "you") authorize Express Capital Associates and its agents, banks or financial institutions to obtain an investigative or consumer report from a credit bureau or a credit agency and to investigate the references given on any other statements or data obtained from applicant.</p>
                        
                        <p>You also authorize Express Capital Associates to transmit this application form, with any of the foregoing information obtained in connection with this application, to any or all of the Recipients for the foregoing purposes. You also consent to the release, by any creditor or financial institution, of any information relating to any of you, to Express Capital Associates and to each of the Recipients, on its own behalf.</p>
                        
                        <p>I am providing my business cell-phone and business e-mail address and hereby consent to the receipt of correspondence/messages regarding transactions with Express Capital Associates and/or its affiliates on either medium. I certify that all the information contained herein is complete, true and accurate.</p>
                        
                        <p>Express Capital Associates is not a lender or a bank. We do not provide loans or make credit decisions. Our service connects businesses like yours with a network of trusted third-party funding providers who offer Merchant Cash Advances (MCAs) and other commercial financing products.</p>
                        
                        <p>A Merchant Cash Advance (MCA) is a purchase of future receivables, not a loan. It is not subject to the same regulatory requirements as traditional loans and may have different terms and conditions. Please be aware that MCAs may involve higher costs compared to traditional financing options.</p>
                    </div>
                    
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="agreementCheckbox" required> 
                            <span class="required">I acknowledge that I have read, understood, and agree to the above document's terms and conditions.</span>
                        </label>
                    </div>
                    
                    <div class="signature-container">
                        <label for="signature" class="required">Signature</label>
                        <div class="signature-pad" id="signaturePad">
                            <span id="signatureInstruction">Please check the agreement box above to enable signature</span>
                        </div>
                        <p class="signature-instructions" id="signatureMessage">You must agree to the terms before signing</p>
                        <button type="button" id="clearSignature"><i class="fas fa-eraser"></i> Clear Signature</button>
                    </div>
                </div>
                
                <div class="buttons">
                    <button type="submit"><i class="fas fa-paper-plane"></i> Submit Application</button>
                    <button type="button" class="btn-print"><i class="fas fa-print"></i> Print Form</button>
                    <button type="button" class="btn-pdf"><i class="fas fa-file-pdf"></i> Download as PDF</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Error Modal -->
    <div class="modal" id="errorModal">
        <div class="modal-content">
            <h2><i class="fas fa-exclamation-circle"></i> Signature Error</h2>
            <p>You must agree to the terms and conditions before signing the application.</p>
            <p>Please check the agreement box first.</p>
            <button onclick="closeModal()">OK, I Understand</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Form validation
            const form = document.getElementById('applicationForm');
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Check if signature is provided
                if (!signaturePad.isEmpty()) {
                    alert('Form submitted successfully! In a real application, this would be sent to the server.');
                    // Here you would typically send the form data to your server
                } else {
                    showErrorModal();
                }
            });
            
            // Print functionality
            document.querySelector('.btn-print').addEventListener('click', function() {
                window.print();
            });
            
            // PDF download functionality
            document.querySelector('.btn-pdf').addEventListener('click', function() {
                alert('PDF download functionality would be implemented here with a library like jsPDF');
            });
            
            // Ownership percentage change event
            const ownershipInput = document.getElementById('ownership');
            ownershipInput.addEventListener('change', function() {
                const ownership = parseInt(this.value);
                if (ownership < 100) {
                    alert('Since ownership is less than 100%, partner information is required');
                }
            });
            
            // Initialize signature pad
            const canvas = document.createElement('canvas');
            const signaturePad = document.getElementById('signaturePad');
            signaturePad.appendChild(canvas);
            
            // Set canvas dimensions
            canvas.width = signaturePad.offsetWidth;
            canvas.height = signaturePad.offsetHeight;
            
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let lastX = 0;
            let lastY = 0;
            
            // Agreement checkbox event
            const agreementCheckbox = document.getElementById('agreementCheckbox');
            const signatureMessage = document.getElementById('signatureMessage');
            const signatureInstruction = document.getElementById('signatureInstruction');
            
            agreementCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    signaturePad.classList.add('active');
                    signaturePad.style.cursor = 'crosshair';
                    signatureInstruction.style.display = 'none';
                    signatureMessage.textContent = 'Sign above using your mouse or touchscreen';
                    signatureMessage.classList.remove('error');
                } else {
                    signaturePad.classList.remove('active');
                    signaturePad.style.cursor = 'not-allowed';
                    signatureInstruction.style.display = 'block';
                    signatureMessage.textContent = 'You must agree to the terms before signing';
                    signatureMessage.classList.add('error');
                    // Clear signature if checkbox is unchecked
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            });
            
            // Signature pad functionality
            signaturePad.addEventListener('mousedown', startDrawing);
            signaturePad.addEventListener('mousemove', draw);
            signaturePad.addEventListener('mouseup', stopDrawing);
            signaturePad.addEventListener('mouseout', stopDrawing);
            
            // Touch events for mobile devices
            signaturePad.addEventListener('touchstart', function(e) {
                if (!agreementCheckbox.checked) {
                    e.preventDefault();
                    showErrorModal();
                    return;
                }
                
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousedown', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                signaturePad.dispatchEvent(mouseEvent);
            });
            
            signaturePad.addEventListener('touchmove', function(e) {
                if (!agreementCheckbox.checked) {
                    e.preventDefault();
                    return;
                }
                
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                signaturePad.dispatchEvent(mouseEvent);
            });
            
            signaturePad.addEventListener('touchend', function() {
                const mouseEvent = new MouseEvent('mouseup');
                signaturePad.dispatchEvent(mouseEvent);
            });
            
            function startDrawing(e) {
                if (!agreementCheckbox.checked) {
                    e.preventDefault();
                    showErrorModal();
                    return;
                }
                
                isDrawing = true;
                [lastX, lastY] = [e.offsetX, e.offsetY];
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                ctx.strokeStyle = '#2c7744';
                ctx.lineWidth = 2;
                ctx.lineJoin = 'round';
                ctx.lineCap = 'round';
                
                ctx.beginPath();
                ctx.moveTo(lastX, lastY);
                ctx.lineTo(e.offsetX, e.offsetY);
                ctx.stroke();
                
                [lastX, lastY] = [e.offsetX, e.offsetY];
            }
            
            function stopDrawing() {
                isDrawing = false;
            }
            
            // Clear signature button
            document.getElementById('clearSignature').addEventListener('click', function() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            });
            
            // Check if signature pad is empty
            function isSignaturePadEmpty() {
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const data = imageData.data;
                
                for (let i = 0; i < data.length; i += 4) {
                    if (data[i + 3] !== 0) { // If alpha channel is not transparent
                        return false;
                    }
                }
                
                return true;
            }
            
            // Modal functions
            window.showErrorModal = function() {
                document.getElementById('errorModal').style.display = 'flex';
            }
            
            window.closeModal = function() {
                document.getElementById('errorModal').style.display = 'none';
            }
            
            // Close modal when clicking outside
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('errorModal');
                if (e.target === modal) {
                    closeModal();
                }
            });
        });
    </script>
</body>
</html>
