<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Express Capital Associates Application</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            padding: 15px; 
            color: #333;
            background-color: #f5f5f5;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            line-height: 1.6; 
        }
        .header { 
            text-align: center; 
            border-bottom: 2px solid #ccc; 
            padding-bottom: 10px; 
            margin-bottom: 20px; 
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        h1 { 
            font-size: 22px; 
            color: #1a4d2e; 
            margin: 0;
        }
        h2 { 
            font-size: 18px; 
            margin-top: 25px; 
            border-bottom: 1px solid #ccc; 
            padding-bottom: 5px; 
            color: #1a4d2e; 
        }
        .form-section { 
            background-color: #fff; 
            padding: 15px; 
            border-radius: 8px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
            margin-bottom: 20px; 
        }
        .form-row { 
            display: flex; 
            flex-wrap: wrap; 
            margin-bottom: 15px; 
        }
        .form-group { 
            flex: 1 1 100%; 
            margin-bottom: 15px;
        }
        label { 
            display: block; 
            margin-bottom: 5px; 
            font-weight: bold; 
            font-size: 14px;
        }
        input[type="text"], input[type="email"], input[type="date"], input[type="tel"], select, textarea {
            width: 100%;
            padding: 12px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-size: 16px; /* Prevents zoom on iOS */
            -webkit-appearance: none;
        }
        input[type="radio"] { 
            margin-right: 5px; 
            transform: scale(1.2);
        }
        .checkbox-group label { 
            font-weight: normal; 
            display: inline; 
        }
        .checkbox-group { 
            margin-bottom: 15px; 
        }
        .hidden { 
            display: none; 
        }
        .section-title { 
            font-size: 16px; 
            font-weight: bold; 
            color: #1a4d2e; 
            margin-top: 20px; 
            background-color: #f0f7f2;
            padding: 10px;
            border-radius: 6px;
        }
        .highlight { 
            color: #d68019; 
        }
        .disclosure-container { 
            border: 1px solid #ccc; 
            padding: 15px; 
            max-height: 200px; 
            overflow-y: scroll; 
            font-size: 12px; 
            margin-bottom: 15px; 
            border-radius: 6px;
        }
        .buttons { 
            text-align: center; 
            margin-top: 20px; 
        }
        button, .anchor-btn {
            background-color: #1a4d2e;
            color: white;
            padding: 14px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 8px 5px;
            transition: background-color 0.3s;
            width: 100%;
            touch-action: manipulation;
        }
        button:hover, .anchor-btn:hover { 
            background-color: #2b6a48; 
        }
        .signature-pad {
            border: 1px solid #ccc;
            border-radius: 6px;
            width: 100%;
            height: 180px;
            background-color: #fff;
            margin-top: 10px;
            cursor: not-allowed;
            touch-action: none;
        }
        .signature-pad-container { 
            text-align: center; 
            margin-bottom: 20px;
        }
        .yellow-highlight {
            background-color: #fff9c9;
            font-weight: bold;
            padding: 8px 12px;
            border-radius: 6px;
            display: inline-block;
            margin: 10px 0;
            border: 1px solid #ffe600;
        }
        .document-upload-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        .document-upload-row .checkbox-label {
            display: flex;
            align-items: center;
            flex-grow: 1;
            margin-bottom: 10px;
        }
        .document-upload-row .checkbox-label input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.5);
        }
        .signature-error {
            color: #d9534f;
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }
        .signature-error button {
            background-color: #d9534f;
            margin-top: 10px;
            width: auto;
        }
        .signature-error button:hover {
            background-color: #c9302c;
        }
        .button-row {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }
        .website-input-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .website-prefix {
            background-color: #f1f1f1;
            padding: 12px 12px;
            border: 1px solid #ccc;
            border-right: none;
            border-radius: 6px 0 0 6px;
            font-size: 14px;
        }
        .website-input {
            flex: 1;
            border-radius: 0 6px 6px 0;
        }
        .mobile-notification {
            display: block;
            background-color: #d4edda;
            color: #155724;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 14px;
        }
        .file-input {
            width: 100%;
            padding: 10px;
            border: 1px dashed #ccc;
            border-radius: 6px;
            background-color: #f9f9f9;
        }
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
        }
        .spinner {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #1a4d2e;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile-specific optimizations */
        @media (min-width: 768px) {
            .form-group { 
                flex: 1 1 45%; 
                margin-right: 10px;
            }
            .form-group:last-child { 
                margin-right: 0; 
            }
            button, .anchor-btn {
                width: auto;
            }
            .mobile-notification {
                display: none;
            }
        }
        
        @media (max-width: 767px) {
            body {
                padding: 10px;
            }
            .header {
                padding: 10px;
            }
            .form-section {
                padding: 15px;
            }
            input[type="text"], input[type="email"], input[type="date"], input[type="tel"], select, textarea {
                padding: 14px;
            }
            .website-input-container {
                flex-direction: column;
            }
            .website-prefix {
                border-right: 1px solid #ccc;
                border-radius: 6px 6px 0 0;
                text-align: center;
                width: 100%;
            }
            .website-input {
                border-radius: 0 0 6px 6px;
                width: 100%;
            }
        }
        
        @media print {
            body {
                background-color: white;
                margin: 0;
                padding: 0;
            }
            .header, .buttons, .anchor-btn, .section-title, .document-uploads, .mobile-notification, .button-row {
                display: none;
            }
            .form-section, .signature-section {
                box-shadow: none;
                background-color: white;
                padding: 0;
                margin-bottom: 10px;
            }
            .container {
                max-width: none;
                width: 100%;
                margin: 0;
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Express Capital Network Associates</h1>
        </header>

        <div class="mobile-notification">
            <strong>Mobile Friendly:</strong> You can complete and submit this form directly from your mobile device.
        </div>

        <form id="unifiedForm" action="https://formspree.io/f/movnqkgb" method="POST" enctype="multipart/form-data">
            <!-- Hidden input for signature data -->
            <input type="hidden" id="signatureData" name="signatureData">

            <section id="application" class="form-section">
                <h2>Application for Funding</h2>
                <div class="section-title">BUSINESS INFORMATION</div>
                <div class="form-row">
                    <div class="form-group"><label for="legalCorporateName">Legal Corporate Name:</label><input type="text" id="legalCorporateName" name="legalCorporateName" required></div>
                    <div class="form-group"><label for="dba">DBA (Doing Business As):</label><input type="text" id="dba" name="dba"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="physicalAddress">Physical Address:</label><input type="text" id="physicalAddress" name="physicalAddress" required></div>
                    <div class="form-group"><label for="telephoneNumber">Telephone Number:</label><input type="tel" id="telephoneNumber" name="telephoneNumber" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="city">City:</label><input type="text" id="city" name="city" required></div>
                    <div class="form-group"><label for="state">State:</label>
                        <select id="state" name="state" required>
                            <option value="">Select State</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                    </div>
                    <div class="form-group"><label for="zip">Zip Code:</label><input type="text" id="zip" name="zip" required pattern="[0-9]{5}(-[0-9]{4})?"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="federalTaxId">Federal Tax ID:</label><input type="text" id="federalTaxId" name="federalTaxId" required></div>
                    <div class="form-group"><label for="dateBusinessStarted">Date Business Started:</label><input type="date" id="dateBusinessStarted" name="dateBusinessStarted" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="website">Website:</label>
                        <div class="website-input-container">
                            <span class="website-prefix">https://www.</span>
                            <input type="text" id="website" name="website" class="website-input" placeholder="yourwebsite.com">
                        </div>
                    </div>
                    <div class="form-group"><label for="emailAddress">Email Address:</label><input type="email" id="emailAddress" name="emailAddress" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Type of Entity:</label>
                        <div class="checkbox-group">
                            <label><input type="radio" name="entityType" value="Corporation" required> Corporation</label>
                            <label><input type="radio" name="entityType" value="LLC"> LLC</label>
                            <label><input type="radio" name="entityType" value="Partnership"> Partnership</label>
                            <label><input type="radio" name="entityType" value="Sole Proprietor"> Sole Proprietor</label>
                        </div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="businessType">Industry Type:</label>
                        <select id="businessType" name="businessType" required>
                            <option value="">Select a business type</option>
                            <option value="Retail Store">Retail Store</option>
                            <option value="Restaurant / Food Service">Restaurant / Food Service</option>
                            <option value="E-commerce / Online Store">E-commerce / Online Store</option>
                            <option value="Construction / Trades (Plumbing, Electrical, HVAC)">Construction / Trades (Plumbing, Electrical, HVAC)</option>
                            <option value="Healthcare / Medical Practice">Healthcare / Medical Practice</option>
                            <option value="Professional Services (Consulting, Legal, Accounting)">Professional Services (Consulting, Legal, Accounting)</option>
                            <option value="Automotive (Repair, Dealership)">Automotive (Repair, Dealership)</option>
                            <option value="Hospitality / Lodging (Hotels, Motels, B&Bs)">Hospitality / Lodging (Hotels, Motels, B&Bs)</option>
                            <option value="Manufacturing / Production">Manufacturing / Production</option>
                            <option value="Transportation / Logistics">Transportation / Logistics</option>
                            <option value="Beauty Salon / Spa">Beauty Salon / Spa</option>
                            <option value="Fitness / Gym">Fitness / Gym</option>
                            <option value="Real Estate / Property Management">Real Estate / Property Management</option>
                            <option value="Technology / Software">Technology / Software</option>
                            <option value="Agriculture">Agriculture</option>
                            <option value="Non-Profit Organization">Non-Profit Organization</option>
                            <option value="Other">Other (Please specify)</option>
                        </select>
                    </div>
                    <div class="form-group hidden" id="other-industry-group">
                        <label for="otherIndustryType">Specify Other Industry:</label>
                        <input type="text" id="otherIndustryType" name="otherIndustryType" maxlength="20" placeholder="e.g., Landscaping Services">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="monthlyGrossIncome">Monthly Gross Income (Avg.):</label><input type="text" id="monthlyGrossIncome" name="monthlyGrossIncome" required></div>
                    <div class="form-group"><label for="fundingAmountRequest">Funding Amount Request:</label><input type="text" id="fundingAmountRequest" name="fundingAmountRequest" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="fundingReason">Primary reason for seeking funding:</label>
                        <select id="fundingReason" name="fundingReason" required>
                            <option value="">Select a reason</option>
                            <option value="General Working Capital / Cash Flow">General Working Capital / Cash Flow</option>
                            <option value="Inventory Purchase">Inventory Purchase</option>
                            <option value="Equipment Purchase or Repair">Equipment Purchase or Repair</option>
                            <option value="Marketing & Advertising Campaigns">Marketing & Advertising Campaigns</option>
                            <option value="Business Expansion / Renovation">Business Expansion / Renovation</option>
                            <option value="Payroll Expenses">Payroll Expenses</option>
                            <option value="Debt Consolidation">Debt Consolidation</option>
                            <option value="Bridge Financing (e.g., waiting on invoices)">Bridge Financing (e.g., waiting on invoices)</option>
                            <option value="Emergency Funds / Unexpected Expenses">Emergency Funds / Unexpected Expenses</option>
                            <option value="Seasonal Business Needs">Seasonal Business Needs</option>
                            <option value="New Product/Service Development">New Product/Service Development</option>
                            <option value="Hiring New Staff">Hiring New Staff</option>
                            <option value="Real Estate Acquisition">Real Estate Acquisition</option>
                            <option value="Franchise Fee / Acquisition">Franchise Fee / Acquisition</option>
                            <option value="Other">Other (Please specify)</option>
                        </select>
                    </div>
                    <div class="form-group hidden" id="other-funding-group">
                        <label for="otherFundingReason">Specify Other Reason:</label>
                        <input type="text" id="otherFundingReason" name="otherFundingReason" maxlength="20" placeholder="e.g., Tax payments">
                    </div>
                </div>


                <div class="section-title">MERCHANT/OWNER INFORMATION</div>
                <div class="form-row">
                    <div class="form-group"><label for="corporateOwnerName">Corporate Officer/Owner Name:</label><input type="text" id="corporateOwnerName" name="corporateOwnerName" required></div>
                    <div class="form-group"><label for="ownerTitle">Title:</label><input type="text" id="ownerTitle" name="ownerTitle" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="ownershipPercentage">Ownership Percentage:</label><input type="text" id="ownershipPercentage" name="ownershipPercentage" required></div>
                    <div class="form-group"><label for="ownerHomeAddress">Home Address:</label><input type="text" id="ownerHomeAddress" name="ownerHomeAddress" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="ownerCity">City:</label><input type="text" id="ownerCity" name="ownerCity" required></div>
                    <div class="form-group"><label for="ownerState">State:</label>
                        <select id="ownerState" name="ownerState" required>
                            <option value="">Select State</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                    </div>
                    <div class="form-group"><label for="ownerZip">Zip Code:</label><input type="text" id="ownerZip" name="ownerZip" required pattern="[0-9]{5}(-[0-9]{4})?"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="ownerSsn">Social Security Number (SSN):</label><input type="text" id="ownerSsn" name="ownerSsn" required pattern="[0-9]{3}-[0-9]{2}-[0-9]{4}" placeholder="XXX-XX-XXXX"></div>
                    <div class="form-group"><label for="ownerDob">Date of Birth:</label><input type="date" id="ownerDob" name="ownerDob" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="ownerFicoScore">FICO Score:</label>
                        <select id="ownerFicoScore" name="ownerFicoScore" required>
                            <option value="">Select...</option>
                        </select>
                    </div>
                    <div class="form-group"><label for="ownerCellNumber">Cell Number:</label><input type="tel" id="ownerCellNumber" name="ownerCellNumber" required></div>
                </div>

                <div class="section-title">PARTNER INFORMATION</div>
                <p>Please provide information for all owners with 20% or more ownership.</p>
                <div class="form-row">
                    <div class="form-group"><label for="partnerName1">Partner Name:</label><input type="text" id="partnerName1" name="partnerName1"></div>
                    <div class="form-group"><label for="partnerTitle1">Title:</label><input type="text" id="partnerTitle1" name="partnerTitle1"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="partnerOwnershipPercentage1">Ownership Percentage:</label><input type="text" id="partnerOwnershipPercentage1" name="partnerOwnershipPercentage1"></div>
                    <div class="form-group"><label for="partnerHomeAddress1">Home Address:</label><input type="text" id="partnerHomeAddress1" name="partnerHomeAddress1"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="partnerCity1">City:</label><input type="text" id="partnerCity1" name="partnerCity1"></div>
                    <div class="form-group"><label for="partnerState1">State:</label>
                        <select id="partnerState1" name="partnerState1">
                            <option value="">Select State</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                    </div>
                    <div class="form-group"><label for="partnerZip1">Zip Code:</label><input type="text" id="partnerZip1" name="partnerZip1" pattern="[0-9]{5}(-[0-9]{4})?"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="partnerSsn1">Social Security Number (SSN):</label><input type="text" id="partnerSsn1" name="partnerSsn1" pattern="[0-9]{3}-[0-9]{2}-[0-9]{4}" placeholder="XXX-XX-XXXX"></div>
                    <div class="form-group"><label for="partnerDob1">Date of Birth:</label><input type="date" id="partnerDob1" name="partnerDob1"></div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="partnerFicoScore1">FICO Score:</label>
                        <select id="partnerFicoScore1" name="partnerFicoScore1">
                            <option value="">Select...</option>
                        </select>
                    </div>
                    <div class="form-group"><label for="partnerCellNumber1">Cell Number:</label><input type="tel" id="partnerCellNumber1" name="partnerCellNumber1"></div>
                </div>

                <div class="section-title"><span class="highlight">Additional Documents Required</span></div>
                <div class="document-uploads">
                    <div class="document-upload-row">
                        <label class="checkbox-label">
                            <input type="checkbox" required /> Copy of driver's license
                        </label>
                        <input type="file" id="driversLicenseUpload" name="driversLicenseUpload" required accept="image/*,.pdf" class="file-input">
                    </div>
                    <div class="document-upload-row">
                        <label class="checkbox-label">
                            <input type="checkbox" required /> 4 recent months of business bank statements
                        </label>
                        <input type="file" id="bankStatementsUpload" name="bankStatementsUpload[]" multiple required accept=".pdf,image/*,.doc,.docx" class="file-input">
                    </div>
                    <div class="document-upload-row">
                        <label class="checkbox-label">
                            <input type="checkbox" required /> Copy of a voided check
                        </label>
                        <input type="file" id="voidedCheckUpload" name="voidedCheckUpload" required accept="image/*,.pdf" class="file-input">
                    </div>
                    <div class="document-upload-row">
                        <label class="checkbox-label">
                            <input type="checkbox" /> Miscellaneous documents
                        </label>
                        <input type="file" id="miscellaneousUpload" name="miscellaneousUpload[]" multiple accept=".pdf,image/*,.doc,.docx,.xls,.xlsx" class="file-input">
                    </div>
                </div>
                <div class="buttons">
                    <button type="button" onclick="window.print()">Print Application</button>
                    <button type="button" id="pdfBtn">Download PDF</button>
                </div>
                <div style="text-align:center; margin-top:0px; margin-bottom:0;">
                    <small>
                        To email your completed application, first download as PDF, then attach the file to your email to:
                        <a href="mailto:franz@expresscapitalassociate.com">franz@expresscapitalassociate.com</a>
                    </small>
                </div>
            </section>

            <div class="button-row">
                <button class="anchor-btn" type="button" onclick="document.getElementById('signature').scrollIntoView({behavior: 'smooth'});">
                    Go to Signature
                </button>
            </div>

            <section id="signature" class="form-section">
                <h2>Signature *</h2>
                
                <!-- Error message container (initially hidden) -->
                <div class="signature-error" id="signatureError">
                    <h3>Signature Error</h3>
                    You must agree to the terms and conditions before signing the application.<br>
                    Please check the agreement box first.
                    <div style="text-align: center; margin-top: 10px;">
                        <button type="button" onclick="document.getElementById('signatureError').style.display = 'none'">OK, I Understand</button>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group"><label for="fullName">Full Name:</label><input type="text" id="fullName" name="fullName" required></div>
                    <div class="form-group"><label for="phoneNumber">Phone Number:</label><input type="tel" id="phoneNumber" name="phoneNumber" required></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label for="companyName">Business Name:</label><input type="text" id="companyName" name="companyName" required></div>
                </div>
                
                <label for="disclosure">Disclosure / Terms & Conditions</label>
                <div class="disclosure-container" id="disclosure">
                    By signing above, each of the above listed business and business owner/officer (individually and collectively, "you") authorize Express Capital Network Associates and its agents, banks or financial institutions to obtain an investigative or consumer report from a credit bureau or a credit agency and to investigate the references given on any other statements or data obtained from applicant. You also authorize Express Capital Network Associates to transmit this application form, with any of the foregoing information obtained in connection with this application, to any or all of the Recipients for the foregoing purposes. You also consent to the release, by any creditor or financial institution, of any information relating to any of you, to Express Capital Network Associates and to each of the Recipients, on its own behalf. I am providing my business cell-phone and business e-mail address and hereby consent to the receipt of correspondence/messages regarding transactions with Express Capital Network Associates and/or its affiliates on either medium. I certify that all the information contained herein is complete, true and accurate. Express Capital Network Associate is not a lender or a bank. We do not provide loans or make credit decisions. Our service connects businesses like yours with a network of trusted third-party funding providers who offer Merchant Cash Advances (MCAs) and other commercial financing products.
                    A Merchant Cash Advance (MCA) is a purchase of future receivables, not a loan. It is not subject to the same regulatory requirements as traditional loans and may have different terms and conditions. Please be aware that MCAs may involve higher costs compared to traditional financing options.
                    All funding offers are subject to the individual provider's underwriting and approval processes. Express Capital Network Associate may receive a referral fee or commission if your business is funded through one of our partners. We strongly advise you to consult with a qualified financial advisor to determine if an MCA or any other financing product is suitable for your specific business needs.
                    By submitting this application, you agree to be contacted by phone, SMS, or email regarding commercial financing products, in accordance with our <a href="https://www.expresscapassociates.com/privacy-policy">Privacy Policy</a>.
                </div>
                
                <h3>1. I acknowledge that I have read, understood, and agree to the above document's terms and conditions. *</h3>
                <div class="checkbox-group">
                    <label><input type="checkbox" id="agreement" name="agreement" required> I agree to the terms and conditions</label>
                </div>
                
                <h3>2. Signature *</h3>
                <div class="signature-pad-container">
                    <canvas id="signaturePad" class="signature-pad" style="cursor: not-allowed;"></canvas>
                    <button type="button" id="clearSignature">Clear Signature</button>
                </div>
                
                <div class="button-row">
                    <button type="submit" id="submitButton">Submit Application</button>
                    <button type="button" onclick="window.print()">Print Form</button>
                    <button type="button" id="pdfBtn2">Download as PDF</button>
                    <button class="anchor-btn" type="button" onclick="document.getElementById('application').scrollIntoView({behavior: 'smooth'});">
                        Back to Application
                    </button>
                </div>
            </section>
        </form>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Submitting your application...</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.7/dist/signature_pad.umd.min.js"></script>
    <script>
        // Initialize FICO score dropdowns after DOM loads
        document.addEventListener('DOMContentLoaded', function() {
            // Owner FICO Score
            const ficoSelect = document.getElementById('ownerFicoScore');
            for (let i = 300; i <= 850; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                ficoSelect.appendChild(option);
            }
            
            // Partner FICO Score
            const partnerFicoSelect = document.getElementById('partnerFicoScore1');
            for (let i = 300; i <= 850; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                partnerFicoSelect.appendChild(option);
            }
        });

        // Show/hide other industry text box in application section
        const businessTypeSelect = document.getElementById('businessType');
        const otherIndustryGroup = document.getElementById('other-industry-group');
        const otherIndustryType = document.getElementById('otherIndustryType');
        const fundingReasonSelect = document.getElementById('fundingReason');
        const otherFundingGroup = document.getElementById('other-funding-group');
        const otherFundingReason = document.getElementById('otherFundingReason');
        const websiteInput = document.getElementById('website');

        function toggleOtherField(selectElement, otherGroupElement, otherInputElement) {
            if (selectElement.value === 'Other') {
                otherGroupElement.classList.remove('hidden');
                otherInputElement.required = true;
            } else {
                otherGroupElement.classList.add('hidden');
                otherInputElement.value = '';
                otherInputElement.required = false;
            }
        }

        businessTypeSelect.addEventListener('change', () => toggleOtherField(businessTypeSelect, otherIndustryGroup, otherIndustryType));
        fundingReasonSelect.addEventListener('change', () => toggleOtherField(fundingReasonSelect, otherFundingGroup, otherFundingReason));

        // Limit word count for 'Other' fields
        function limitWords(inputElement, maxWords) {
            const words = inputElement.value.trim().split(/\s+/);
            if (words.length > maxWords) {
                inputElement.value = words.slice(0, maxWords).join(' ');
            }
        }
        otherIndustryType.addEventListener('input', () => limitWords(otherIndustryType, 20));
        otherFundingReason.addEventListener('input', () => limitWords(otherFundingReason, 20));

        // Partner section required logic based on ownership percentage
        document.getElementById('ownershipPercentage').addEventListener('input', function() {
            let val = parseFloat(this.value);
            let required = (val < 100);
            [
                "partnerName1", "partnerTitle1", "partnerOwnershipPercentage1", "partnerHomeAddress1",
                "partnerCity1", "partnerState1", "partnerZip1", "partnerSsn1",
                "partnerDob1", "partnerFicoScore1", "partnerCellNumber1"
            ].forEach(id => {
                let el = document.getElementById(id);
                if (el) el.required = required;
            });
        });

        // Download PDF functionality
        document.getElementById('pdfBtn').addEventListener('click', generatePDF);
        document.getElementById('pdfBtn2').addEventListener('click', generatePDF);
        
        function generatePDF() {
            // This would be your PDF generation code
            alert("PDF download functionality would be implemented here");
        }

        // Signature pad logic using signature_pad library
        const canvas = document.getElementById("signaturePad");
        let signaturePad;

        function initSignaturePad() {
            signaturePad = new SignaturePad(canvas, {
                backgroundColor: 'rgb(255, 255, 255)',
                minWidth: 1,
                maxWidth: 3,
                throttle: 16 // Improve performance on mobile
            });
            
            // Enable/disable signature pad based on agreement checkbox
            const agreementCheckbox = document.getElementById('agreement');
            
            // Initial state
            if (!agreementCheckbox.checked) {
                signaturePad.off();
                canvas.style.cursor = 'not-allowed';
            }
            
            agreementCheckbox.addEventListener('change', () => {
                if (agreementCheckbox.checked) {
                    signaturePad.on();
                    canvas.style.cursor = 'crosshair';
                    // Hide error if it was showing
                    document.getElementById('signatureError').style.display = 'none';
                } else {
                    signaturePad.off();
                    signaturePad.clear();
                    canvas.style.cursor = 'not-allowed';
                }
            });
            
            // Show error when trying to sign without agreement
            canvas.addEventListener('mousedown', (e) => {
                if (!agreementCheckbox.checked) {
                    e.preventDefault();
                    document.getElementById('signatureError').style.display = 'block';
                    // Scroll to error message
                    document.getElementById('signatureError').scrollIntoView({behavior: 'smooth'});
                }
            });
            
            canvas.addEventListener('touchstart', (e) => {
                if (!agreementCheckbox.checked) {
                    e.preventDefault();
                    document.getElementById('signatureError').style.display = 'block';
                    // Scroll to error message
                    document.getElementById('signatureError').scrollIntoView({behavior: 'smooth'});
                }
            });
            
            document.getElementById('clearSignature').addEventListener('click', () => {
                signaturePad.clear();
            });
            
            // Resize canvas to fit container
            resizeCanvas();
        }

        // Initialize signature pad after resources are loaded
        window.addEventListener('load', initSignaturePad);
        
        function resizeCanvas() {
            const ratio = Math.max(window.devicePixelRatio || 1, 1);
            canvas.width = canvas.offsetWidth * ratio;
            canvas.height = canvas.offsetHeight * ratio;
            canvas.getContext("2d").scale(ratio, ratio);
            if (signaturePad) {
                signaturePad.clear(); // otherwise isEmpty() might return incorrect value
            }
        }
        window.addEventListener('resize', resizeCanvas);

        // Form submission handling
        const unifiedForm = document.getElementById('unifiedForm');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const submitButton = document.getElementById('submitButton');
        
        unifiedForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const agreementCheckbox = document.getElementById('agreement');
            if (!agreementCheckbox.checked) {
                alert("You must agree to the terms before submitting.");
                document.getElementById('signatureError').style.display = 'block';
                document.getElementById('signatureError').scrollIntoView({behavior: 'smooth'});
                return;
            }

            if (signaturePad.isEmpty()) {
                alert("Please sign the document before submitting.");
                return;
            }

            // Show loading state
            loadingOverlay.style.display = 'flex';
            submitButton.disabled = true;
            
            try {
                // Convert signature to data URL
                const signatureData = signaturePad.toDataURL();
                document.getElementById('signatureData').value = signatureData;
                
                // Add https://www. prefix to website if provided
                if (websiteInput.value) {
                    websiteInput.value = 'https://www.' + websiteInput.value;
                }
                
                // Create a simple FormData object without any complex processing
                const formData = new FormData(unifiedForm);
                
                // Submit the form using fetch
                const response = await fetch(unifiedForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });
                
                if (response.ok) {
                    // Show success message
                    alert("Application submitted successfully!");
                    // Reset form
                    unifiedForm.reset();
                    signaturePad.clear();
                } else {
                    throw new Error('Form submission failed');
                }
            } catch (error) {
                console.error('Error:', error);
                alert("There was an error submitting your application. Please try again or email it directly to franz@expresscapitalassociate.com");
            } finally {
                // Hide loading state
                loadingOverlay.style.display = 'none';
                submitButton.disabled = false;
            }
        });
    </script>
</body>
</html>
